var $win,min_w=991,breakpoint_w=768,page_size="",os="other",ua=navigator.userAgent.toLowerCase();if(-1!=ua.indexOf("android")?os="android":-1==ua.indexOf("iphone")&&-1==ua.indexOf("ipad")&&-1==ua.indexOf("ipod")||(os="ios"),"ios"==os&&screen.width>=breakpoint_w){var viewportContent="width=1060px,user-scalable=no,shrink-to-fit=yes";document.querySelector("meta[name='viewport']").setAttribute("content",viewportContent)}var vendor=/webkit/i.test(navigator.appVersion)?"Webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"";!function(){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout;window.requestAnimationFrame=n;var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;window.cancelAnimationFrame=e}();var Navigation=function(s){var r,d,c,l,u="",f="",p={},h={},m=null,v=null,i=!1;function w(){f!=u&&(h[f].stop().animate({opacity:0},300,"linear",function(){s(this).css({display:"none"})}),h[u].stop().css({display:"block",opacity:0}).animate({opacity:1},300,"linear"),p[f].removeClass("hover")),f=u,d.removeClass("nav-hover")}function y(){d.removeClass("nav-child-open"),d.removeClass("nav-hover"),p[f].removeClass("hover"),f=""}function C(){s(document).off(".noScroll"),l.stop().animate({opacity:0},300,"linear",function(){s(this).css({height:0})})}return{init:function(){d=s("#wrapper"),c=s("#header"),l=s("<div>").attr("id","nav");var n=c.find("header").clone(),e=[],i=[];n.find("nav").find("li").each(function(){e.push(s(this))}),c.find(".nav-child").find("nav").each(function(){i.push(s(this).find("ul"))});for(var o=0;o<e.length;o++)e[o].append(i[o].clone());l.append(n),s("body").append(l),c.find(".nav-opener").on("click",function(){return s(document).on("touchmove.noScroll",function(n){n.preventDefault()}),l.stop().css({height:"100%",opacity:0}).animate({opacity:1},300,"linear"),!1}),l.find(".nav-close").on("click",function(){return C(),!1});var a=c.find("header").find("nav"),t=c.find(".nav-child");u=a.find(".current").find("a").attr("data-key"),r=d.hasClass("nav-child-opened")?"opened":"closed",a.find("a").each(function(){var n=s(this).attr("data-key");p[n]=s(this).parent(),h[n]=t.find(".nav-"+n)}),"other"==os?(a.find("a").on("click",function(){return!1}),a.find("a").hover(function(){clearTimeout(m),clearTimeout(v);var n=s(this).attr("data-key");"closed"==r&&d.addClass("nav-child-open"),f&&f!=n?(h[f].stop().animate({opacity:0},300,"linear",function(){s(this).css({display:"none"})}),p[f].removeClass("hover")):"closed"==r&&t.find("nav").stop().css({display:"none"}),f!=n&&(h[f=n].stop().css({display:"block",opacity:0}).animate({opacity:1},300,"linear"),d.addClass("nav-hover")),p[n].addClass("hover")},function(){m="closed"==r?setTimeout(function(){y()},100):setTimeout(function(){w()},100)}),t.hover(function(){clearTimeout(m),clearTimeout(v),"closed"==r&&d.addClass("nav-child-open")},function(){v="closed"==r?setTimeout(function(){y()},100):setTimeout(function(){w()},100)})):a.find("a").on("click",function(){var n=s(this).attr("data-key");f==n?u||y():("closed"==r&&d.addClass("nav-child-open"),n=s(this).attr("data-key"),f&&f!=n?(h[f].stop().animate({opacity:0},300,"linear",function(){s(this).css({display:"none"})}),p[f].removeClass("hover")):"closed"==r&&t.find("nav").stop().css({display:"none"}),f!=n&&(h[f=n].stop().css({display:"block",opacity:0}).animate({opacity:1},300,"linear"),d.addClass("nav-hover")),p[n].addClass("hover"))}),"opened"==r?h[f=u].css({display:"block"}):d.addClass("init-nav-child")},scroll:function(n,e){10<e?i||(s("body").addClass("short-header"),i=!0):i&&(s("body").removeClass("short-header"),i=!1),"other"==os&&c.css("left",-n)},close:C}}(jQuery);!function(a){$win=a(window),a(document).ready(function(){a("body").addClass("os-"+os),0<a(".modal-keyword").size()&&(a.mCustomScrollbar.defaults.scrollButtons.enable=!0,a.mCustomScrollbar.defaults.axis="xy",a(".modal-keyword").find(".text").mCustomScrollbar()),a("#pagetop").find("a").on("click",function(){return a("body,html").animate({scrollTop:0},600,"easeOutCubic"),!1}),Navigation.init(),a(".history-back").on("click",function(){if(document.referrer){var n=document.referrer,e=new RegExp(location.hostname,"i");if(!!n.match(e))return history.back(),!1}});var i,n=function(){$win.width(),"other"!=os?window.innerHeight:$win.height();clearTimeout(null)};if($win.on("resize",n).on("scroll",function(){var n=$win.scrollTop(),e=$win.scrollLeft();Navigation.scroll(e,n)}),function(n){if(n<breakpoint_w){if("narrow"!=page_size)return a("html").removeClass("page-wide").addClass("page-narrow"),page_size="narrow"}else if("wide"!=page_size)return a("html").removeClass("page-narrow").addClass("page-wide"),page_size="wide"}($win.width()),n(),location.hash){var e=location.hash;0<a(e).size()&&(i=a(e))}function o(){var n=i.offset(),e="wide"==page_size?120:50;a(window).scrollTop(n.top-e)}a(".hash").on("click",function(){var n=a(this).attr("href");return 0<a(n).size()&&(Navigation.close(),i=a(n),o()),!1}),$win.on("load",function(){a("html").addClass("ready"),i&&setTimeout(function(){o()},200),a(".fade").on("inview",function(n,e,i,o){e&&a(this).stop().addClass("fade-on")})})})}(jQuery);
